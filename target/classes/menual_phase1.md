## 1.5 스프링의 IoC
### 1.5.1 오브젝트 팩토리를 이용한 스프링 IoC
#### DaoFactory 를 스프링에서 사용하도록 변경
##### Bean : 스프링이 제어권을 가지고 직접 만들고 관계를 부여하는 오브젝트

> #### 빈 팩토리 vs 애플리케이션 컨텍스트
>       
> 1. 빈 팩토리<br>
> 빈을 생성하고 관계를 설정하는 기본 기능에 초점<br>
> 설정 정보를 자바 코드로 작성          
>  
> 2. 애플리케이션 컨텍스트<br> 
> 애플리케이션 전반에 걸쳐 모든 구성요소의 제어작업을 담당하는 IoC엔진에 초점<br>
> 설정 정보를 담고있는 무언가를 가져와 이를 활용
>
> ＊ 예제 SpringDaoFactory, SpringUserDaoTest.annotationConfigApplicationContextTest

### 1.5.2 애플리케이션 컨텍스트 동작 방식
> #### DaoFactory<br> 
> DAO 오브젝트(UserDao)를 생성하고 DB 생성 오브젝트(ConnectionMaker) 와 관계를 <span style="color:red">**직접**</span> 맺어주는 역할
> #### ApplicationContext
> 애플리케이션에서 <span style="color:red">**IoC를 적용해**</span> 관리할 모든 오브젝트에 대한 생성과 관계설정을 담당하는 역할.
> 직접 오브젝트를 생성하고 관계를 맺어주는 코드는 없지만 생성정보와 연관관계 정보를 별도의 설정정보를 통해 얻음.

※ 용어 정리

| 이름   | 설명 |
|-|-|
|빈|스프링이 IoC 방식으로 관리하는 오브젝트<br>(스프링이 직접 그 생성과 제어를 담당하는 오브젝트)|
|빈 팩토리|빈을 등록하고, 생성하고, 조회해 돌려주고, 구 외에 부가적인 빈을 관리하는 기능을 담당하는 오브젝트       |
|애플리케이션 컨텍스트|빈 팩토리를 확장한 IoC 컨테이너. 기본적인 기능은 빈 팩토리와 동일하나 각종 부가 서비스를 추가로 제공|
|설정정보/설정 메타정보|애플리케이션 컨텍스트/빈 팩토리가 IoC를 적용하기 위해 사용하는 메타정보|
|컨테이너/IoC 컨테이너|IoC 방식으로 빈을 관리한다는 의미에서 애플리케이션 컨텍스트나 빈 팩토리를 컨테이너라고 부름|
|스프링 프레임워크|IoC 컨테이너, 애플리케이션 컨텍스트를 포함해 스프링이 제공하는 모든 기능을 통틀어 제공해주는 프레임워크
|

## 1.6 싱글톤 레지스트리와 오브젝트 스코프

##### DaoFactory와 ApplicationContext 를 통해 만들어진 객체는 중요한 차이점이 있다.

> 오브젝트의 동일성과 동등성
> 동일성 비교 연산 "=="  (메모리상에 존재)
> 동등성 비교 연산 "equals"  (값만 같은 경우)

DaoFactory 의 경우 동등한 빈이 조회되지만 ApplicationContext 의 경우 동일한 빈이 조회된다. (참조 : SpringUserDaoSingletonTest)
그 이유는 애플리케이션 컨텍스트는 싱글톤을 저장하고 관리하는 싱글톤 레지스트리이기 때문이다.
스프링이 사용하는 싱글톤은 디자인 패턴에서 나오는 싱글톤 패턴과 비슷하지만 구현 방법은 확연히 다르다. (참조 : UserDaoSingletonAntiExample)
그렇다면 싱글톤 레지스트리란?
스프링 컨테이너에서 싱글톤을 직접 생성하고 관리하고 공급하는 역할을 한다. 그래서 컨테이너에서 private 생성자가 아닌 평범한 자바 클래스를 사용해서 만들고 관리한다. 이런 역할을 해주는 오브젝트를 싱글톤 레지스트리라고 한다.
하지만 싱글톤은 멀티스레드 환경에서 동시에 접근할 수 있기 때문에 상태 관리에 주의를 기울여야 한다. (참조 : UserDaoSingletonSharedAntiExample)


